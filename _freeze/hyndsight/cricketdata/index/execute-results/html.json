{
  "hash": "60c6e7cf5c2947cbda15303f11490e7b",
  "result": {
    "markdown": "---\ndate: 2022-06-05\ntitle: \"The cricketdata package\"\nslug: cricketdata\ncategories:\n  - R\n  - data\nimage: index_files/figure-html/woment20graph-1.png\n---\n\n\n\n\n## Four functions\n\n[The cricketdata package](http://pkg.robjhyndman.com/cricketdata/) has been around for a few years [on github](https://github.com/robjhyndman/cricketdata), and it has been on [CRAN](https://cloud.r-project.org/package=cricketdata) since February 2022. There are only four functions:\n\n * `fetch_cricinfo()`: Fetch team data on international cricket matches provided by [ESPNCricinfo](https://www.espncricinfo.com/).\n * `fetch_player_data()`: Fetch individual player data on international cricket matches provided by [ESPNCricinfo](https://www.espncricinfo.com/).\n * `find_player_id()`: Search for the player ID on [ESPNCricinfo](https://www.espncricinfo.com/).\n * `fetch_cricsheet()`: Fetch ball-by-ball, match and player data from [Cricsheet](https://cricsheet.org).\n\n[Jacquie Tran](https://www.jacquietran.com) wrote the first version of the `fetch_cricsheet()` function, and [the vignette](http://pkg.robjhyndman.com/cricketdata/articles/cricsheet.html) which demonstrates it.\n\nHere are some examples demonstrating the Cricinfo functions.\n\n\n::: {.cell hash='index_cache/html/packages_70ea5647e08fce443e55e161535d1ea0'}\n\n```{.r .cell-code}\nlibrary(cricketdata)\nlibrary(tidyverse)\n```\n:::\n\n\n## Women's T20 bowling data\n\nThe `fetch_cricinfo()` function downloads data for international T20, ODI or Test matches, for men or women, and for batting, bowling or fielding. By default, it downloads career-level statistics for individual players. Here is an example for women T20 bowlers.\n\n\n::: {.cell hash='index_cache/html/wt20_8ba5461a5373b74982f56edd49d1b065'}\n\n```{.r .cell-code}\n# Fetch all Women's T20 data\nwt20 <- fetch_cricinfo(\"T20\", \"Women\", \"Bowling\")\n```\n:::\n\n::: {.cell hash='index_cache/html/woment20_d689a6649d0261d0109b003bb89b9a1b'}\n\n```{.r .cell-code}\nwt20 %>%\n  select(Player, Country, Matches, Runs, Wickets, Economy, StrikeRate)\n#> # A tibble: 1,798 × 7\n#>    Player       Country      Matches  Runs Wickets Economy StrikeRate\n#>    <chr>        <chr>          <int> <int>   <int>   <dbl>      <dbl>\n#>  1 A Mohammed   West Indies      117  2206     125    5.58       19.0\n#>  2 S Ismail     South Africa     105  2153     115    5.81       19.3\n#>  3 EA Perry     Australia        126  2237     115    5.87       19.9\n#>  4 KH Brunt     England          104  2019     108    5.50       20.4\n#>  5 M Schutt     Australia         84  1685     108    6.05       15.5\n#>  6 Nida Dar     Pakistan         114  1951     106    5.35       20.6\n#>  7 SFM Devine   New Zealand      107  1822     104    6.36       16.5\n#>  8 A Shrubsole  England           79  1587     102    5.96       15.7\n#>  9 Poonam Yadav India             72  1495      98    5.75       15.9\n#> 10 SR Taylor    West Indies      111  1639      98    5.66       17.7\n#> # … with 1,788 more rows\n```\n:::\n\n\nWe can plot a bowler's strike rate (balls per wicket) vs economy rate (runs per wicket). Each observation represents one player, who has taken at least 50 international wickets.\n\n\n::: {.cell hash='index_cache/html/woment20graph_37c4887bd1790d78c5749b29ecc183b0'}\n\n```{.r .cell-code}\nwt20 %>%\n  filter(Wickets >= 50) %>%\n  ggplot(aes(y = StrikeRate, x = Average)) +\n  geom_point(alpha = 0.3, col = \"blue\") +\n  ggtitle(\"Women International T20 Bowlers\") +\n  ylab(\"Balls per wicket\") + xlab(\"Runs per wicket\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/woment20graph-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/boochatham_96d9db817d661618a379e21d8c83729a'}\n\n:::\n\n\nThe extraordinary result on the bottom left is due to the Thai all-rounder, Nattaya Boochatham, who has taken 59 wickets, with a strike rate of 13.475, an average of 8.78, and an economy rate of 3.909.\n\n## Australian men's ODI data by innings\n\nThe next example shows Australian men's ODI batting results by innings.\n\n\n::: {.cell hash='index_cache/html/menodidownlaod_9fc4bef3897870f94c0609eb514d6a7c'}\n\n```{.r .cell-code}\n# Fetch all Australian Men's ODI data by innings\nmenODI <- fetch_cricinfo(\"ODI\", \"Men\", \"Batting\", type = \"innings\", country = \"Australia\")\n```\n:::\n\n::: {.cell hash='index_cache/html/menodi_316d49e62ab235990f44f9813217ef79'}\n\n```{.r .cell-code}\nmenODI %>%\n  select(Date, Player, Runs, StrikeRate, NotOut)\n#> # A tibble: 10,675 × 5\n#>    Date       Player        Runs StrikeRate NotOut\n#>    <date>     <chr>        <int>      <dbl> <lgl> \n#>  1 2011-04-11 SR Watson      185       193. TRUE  \n#>  2 2007-02-20 ML Hayden      181       109. TRUE  \n#>  3 2017-01-26 DA Warner      179       140. FALSE \n#>  4 2015-03-04 DA Warner      178       134. FALSE \n#>  5 2001-02-09 ME Waugh       173       117. FALSE \n#>  6 2016-10-12 DA Warner      173       127. FALSE \n#>  7 2004-01-16 AC Gilchrist   172       137. FALSE \n#>  8 2019-06-20 DA Warner      166       113. FALSE \n#>  9 2006-03-12 RT Ponting     164       156. FALSE \n#> 10 2016-12-04 SPD Smith      164       104. FALSE \n#> # … with 10,665 more rows\n```\n:::\n\n::: {.cell hash='index_cache/html/menodiave_e5b9a7a85dc125ed3d4de1644c83303c'}\n\n:::\n\n::: {.cell hash='index_cache/html/menodigraph_9e86603ef0b76c77513add898bd0c91b'}\n\n```{.r .cell-code}\nmenODI %>%\n  ggplot(aes(y = Runs, x = Date)) +\n  geom_point(alpha = 0.2, col = \"#D55E00\") +\n  geom_smooth() +\n  ggtitle(\"Australia Men ODI: Runs per Innings\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/menodigraph-1.png){width=672}\n:::\n:::\n\n\nThe average number of runs per innings slowly increased until about 2000, after which it has remained largely constant at about 35.1. This is a little higher than the smooth line shown on the plot, which has not taken account of not-out results.\n\n## Indian test fielding data\n\nNext, we demonstrate some of the fielding data available, using Test match fielding from Indian men's players.\n\n\n::: {.cell hash='index_cache/html/indiafieldingdownload_4c7a537fc883ac195cbc5c3d54ac549a'}\n\n```{.r .cell-code}\nIndfielding <- fetch_cricinfo(\"Test\", \"Men\", \"Fielding\", country = \"India\")\n```\n:::\n\n::: {.cell hash='index_cache/html/indiafielding_9bedb06920db58a20b90fb3b8db4a730'}\n\n```{.r .cell-code}\nIndfielding\n#> # A tibble: 303 × 11\n#>    Player       Start   End Matches Innings Dismis…¹ Caught Caugh…² Caugh…³\n#>    <chr>        <int> <int>   <int>   <int>    <int>  <int>   <int>   <int>\n#>  1 MS Dhoni      2005  2014      90     166      294    256       0     256\n#>  2 R Dravid      1996  2012     163     299      209    209     209       0\n#>  3 SMH Kirmani   1976  1986      88     151      198    160       0     160\n#>  4 VVS Laxman    1996  2012     134     248      135    135     135       0\n#>  5 KS More       1986  1993      49      90      130    110       0     110\n#>  6 RR Pant       2018  2022      31      61      122    111       0     111\n#>  7 SR Tendulkar  1989  2013     200     366      115    115     115       0\n#>  8 SM Gavaskar   1971  1987     125     216      108    108     108       0\n#>  9 NR Mongia     1994  2001      44      77      107     99       0      99\n#> 10 M Azharuddin  1984  2000      99     177      105    105     105       0\n#> # … with 293 more rows, 2 more variables: Stumped <int>,\n#> #   MaxDismissalsInnings <dbl>, and abbreviated variable names\n#> #   ¹​Dismissals, ²​CaughtFielder, ³​CaughtBehind\n```\n:::\n\n\nWe can plot the number of dismissals by number of matches for all male test players. Because wicket keepers typically have a lot more dismissals than other players, they are shown in a different colour.\n\n\n::: {.cell hash='index_cache/html/indiafieldinggraph_8bd66e378b8b3081375c61d83f6e2cd4'}\n\n```{.r .cell-code}\nIndfielding %>%\n  mutate(wktkeeper = (CaughtBehind > 0) | (Stumped > 0)) %>%\n  ggplot(aes(x = Matches, y = Dismissals, col = wktkeeper)) +\n  geom_point() +\n  ggtitle(\"Indian Men Test Fielding\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/indiafieldinggraph-1.png){width=672}\n:::\n:::\n\n\nThe high number of dismissals, close to 300, is of course due to MS Dhoni. Another interesting one here is the non-wicketkeeper with over 200 dismissals, which is Rahul Dravid who took 209 catches during his career.\n\n## Meg Lanning's ODI batting\n\nFinally, let's look at individual player data. The `fetch_player_data()` requires the Cricinfo player ID, which you can either look up on their website, or use the `find_player_id()` function. We will look at the ODI results of Australia's captain, Meg Lanning.\n\n\n::: {.cell hash='index_cache/html/meglanningsetup_414fc7a290eddba165a1c049ed3e5ac0'}\n\n```{.r .cell-code}\nmeg_lanning_id <- find_player_id(\"Lanning\")$ID\nMegLanning <- fetch_player_data(meg_lanning_id, \"ODI\") %>%\n  mutate(NotOut = (Dismissal == \"not out\"))\n```\n:::\n\n::: {.cell hash='index_cache/html/meglanning_29e413c960cef7ff881600e2d59f7696'}\n\n```{.r .cell-code}\nMegLanning\n#> # A tibble: 100 × 14\n#>    Date       Innings Opposition Ground  Runs  Mins    BF   X4s   X6s    SR\n#>    <date>       <int> <chr>      <chr>  <dbl> <dbl> <int> <int> <int> <dbl>\n#>  1 2011-01-05       1 ENG Women  Perth     20    60    38     2     0  52.6\n#>  2 2011-01-07       2 ENG Women  Perth    104   148   118     8     1  88.1\n#>  3 2011-06-14       2 NZ Women   Brisb…    11    15    14     2     0  78.6\n#>  4 2011-06-16       1 NZ Women   Brisb…     5     8     8     1     0  62.5\n#>  5 2011-06-30       1 NZ Women   Chest…    17    24    20     3     0  85  \n#>  6 2011-07-02       2 India Wom… Chest…    23    40    32     3     0  71.9\n#>  7 2011-07-05       2 ENG Women  Lord's    43    40    33     9     0 130. \n#>  8 2011-07-07       2 ENG Women  Worms…     0     2     3     0     0   0  \n#>  9 2012-03-12       1 India Wom… Ahmed…    45    61    44     7     0 102. \n#> 10 2012-03-14       1 India Wom… Wankh…   128   125   104    19     1 123. \n#> # … with 90 more rows, and 4 more variables: Pos <int>, Dismissal <chr>,\n#> #   Inns <int>, NotOut <lgl>\n```\n:::\n\n\nWe can plot her runs per innings on the vertical axis over time on the horizontal axis.\n\n\n::: {.cell hash='index_cache/html/meglanninggraph_42fa8668bbd45e68824a5bc2abf9b3d1'}\n\n```{.r .cell-code}\n# Compute batting average\nMLave <- MegLanning %>%\n  filter(!is.na(Runs)) %>%\n  summarise(Average = sum(Runs) / (n() - sum(NotOut))) %>%\n  pull(Average)\nnames(MLave) <- paste(\"Average =\", round(MLave, 2))\n# Plot ODI scores\nggplot(MegLanning) +\n  geom_hline(aes(yintercept = MLave), col=\"gray\") +\n  geom_point(aes(x = Date, y = Runs, col = NotOut)) +\n  ggtitle(\"Meg Lanning ODI Scores\") +\n  scale_y_continuous(sec.axis = sec_axis(~., breaks = MLave))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/meglanninggraph-1.png){width=672}\n:::\n:::\n\n\nShe has shown amazing consistency over her career, with centuries scored in every year of her career except for 2021, when her highest score from 6 matches was 53.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}