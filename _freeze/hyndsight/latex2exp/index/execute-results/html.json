{
  "hash": "f86cc9ea35e5ac0b97911e3b89500f2b",
  "result": {
    "markdown": "---\ndate: 2015-09-02 07:17:08+00:00\nlink: https://robjhyndman.com/hyndsight/latex2exp/\nslug: latex2exp\ntitle: Mathematical annotations on R plots\ncategories:\n- computing\n- graphics\n- LaTeX\n- R\n---\n\n\nI've always struggled with using `plotmath` via the `expression` function in R for adding mathematical notation to axes or legends. For some reason, the most obvious way to write something never seems to work for me and I end up using trial and error in a loop with far too many iterations.\n\nSo I am very happy to see the new **[latex2exp](https://github.com/stefano-meschiari/latex2exp)** package available which translates LaTeX expressions into a form suitable for R graphs. This is going to save me time and frustration!<!-- more -->\n\nHere is a quick example showing a Lee-Carter decomposition of some mortality data.\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-1_7e090e790a1ba402c3f00f8151a6de53'}\n\n```{.r .cell-code}\nlibrary(demography)\nlibrary(latex2exp)\n\nfit <- lca(fr.mort)\n\npar(mfrow=c(2,2), mar=c(4,5,2,1), family=\"serif\")\nplot(fit$age, fit$ax, type=\"l\", ylab=TeX(\"a_x\"), xlab=\"Age: x\")\nplot(fit$age, fit$bx, type=\"l\", ylab=TeX(\"b_x\"), xlab=\"Age: x\")\nplot(0, type=\"n\", axes=FALSE, xlab=\"\", ylab=\"\")\ntext(1, 0, TeX(\"m_{x,t} = a_x + k_tb_x + e_{x,t}\"))\nplot(fit$kt, ylab=TeX(\"k_t\"), xlab=\"Year: t\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n\n\nThere are several more examples in the [package documentation](https://github.com/stefano-meschiari/latex2exp).\n\nThe results are still a little ugly, but that is because of the limitations of base graphics in R. To get something more LaTeX-like, the [**tikzDevice**](https://cran.rstudio.com/web/packages/tikzDevice/index.html) package can be used as follows.\n\n```r\nlibrary(demography)\nlibrary(tikzDevice)\n\nfit <- lca(fr.mort)\n\ntikz(\"tikz-test.tex\",width=15/2.54,height=12/2.54)\npar(mfrow=c(2,2),mar=c(4,5,2,1),family=\"serif\")\nplot(fit[[\"age\"]],fit$ax,type=\"l\",\n     ylab=\"$a_x$\", xlab=\"Age: $x$\")\nplot(fit[[\"age\"]],fit$bx,type=\"l\",\n     ylab=\"$b_x$\", xlab=\"Age: $x$\")\nplot(0,type=\"n\",axes=FALSE,xlab=\"\",ylab=\"\")\ntext(1,0,\"$m_{x,t} = a_x + k_tb_x + e_{x,t}$\")\nplot(fit$kt,ylab=\"$k_t$\", xlab=\"Year: $t$\")\ndev.off()\n```\n\n[![Screenshot from 2015-09-02 17:12:50](/files/Screenshot-from-2015-09-02-171250.png)](/files/Screenshot-from-2015-09-02-171250.png)\n\nWhile the results look much nicer, it is rather slow.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}