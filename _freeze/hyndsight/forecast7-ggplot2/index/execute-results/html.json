{
  "hash": "d2bc61dbc7b27779568434ab212c3531",
  "result": {
    "markdown": "---\ndate: 2016-05-09 05:00:00+00:00\nslug: forecast7-ggplot2\ntitle: forecast v7 and ggplot2 graphics\ncategories:\n- forecasting\n- graphics\n- R\n- time series\n---\n\n\nVersion 7 of the [forecast package](https://github.com/robjhyndman/forecast) was released on CRAN about a month ago, but I'm only just getting around to posting about the new features.\n\nThe most visible feature was the introduction of [ggplot2 graphics](https://ggplot2.tidyverse.org/). I first wrote the forecast package before ggplot2 existed, and so only base graphics were available. But I figured it was time to modernize and use the nice features available from ggplot2. The following examples illustrate the main new graphical functionality.\n\nFor illustration purposes, I'm using the male and female monthly deaths from lung diseases in the UK.\n\n<!-- more -->\n\nFor all base plot() methods, there is now an autoplot() method with the same functionality.\n\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-1_8833b3a1da1e83143b471f7411067f51'}\n\n```{.r .cell-code}\nlibrary(forecast)\nlibrary(ggplot2)\n\n# autoplot of a ts object\nautoplot(mdeaths)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-2_e7e8b06ad14f18b63efc9d8a1f3d6757'}\n\n```{.r .cell-code}\n# autoplot of a forecast object\nfc <- forecast(fdeaths)\nautoplot(fc)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-3_79bc6dda792c26b7cb7d47e0fa0571ae'}\n\n```{.r .cell-code}\n# autoplot of an stl object\nautoplot(stl(mdeaths, s.window=\"periodic\", robust=TRUE))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-4_331b7cb91af440c4372d80181e553186'}\n\n```{.r .cell-code}\n# Plotting multiple forecasts in one plot\nfmdeaths <- cbind(Males=mdeaths, Females=fdeaths)\nfit <- tslm(fmdeaths ~ trend + season)\nfcast <- forecast(fit, h=10)\nautoplot(fcast)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-5_97371cbbfbfcac5dffd98932c2741f6d'}\n\n```{.r .cell-code}\n# Plotting the components of an ETS model\nfit <- ets(mdeaths)\nautoplot(fit)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-6_27efd6b8b958309bc3c528518afd68c2'}\n\n```{.r .cell-code}\n# Plotting the inverse characteristic roots of an ARIMA model\nfit <- auto.arima(mdeaths, D=1)\nautoplot(fit)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nFor plotting functions that do not use an S3 plot() method, there is now a ggplot2 version with \"gg\" prefixed to the function name.\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-7_d3b083eb75a5575584f16e4450f291ff'}\n\n```{.r .cell-code}\n    ggtsdisplay(mdeaths)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n\n```{.r .cell-code}\n    ggAcf(mdeaths)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-2.png){width=672}\n:::\n\n```{.r .cell-code}\n    ggPacf(mdeaths)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-3.png){width=672}\n:::\n\n```{.r .cell-code}\n    ggCcf(mdeaths, fdeaths)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-7-4.png){width=672}\n:::\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-8_1ed919b243c2b971d3b13867800bfd28'}\n\n```{.r .cell-code}\n    ggseasonplot(mdeaths)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\n    ggmonthplot(mdeaths)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-2.png){width=672}\n:::\n:::\n\n\nThere is also a new `geom_forecast()` function which uses `forecast.ts()` to obtain forecasts of the time series passed to `autoplot()`.\n\n\n\n::: {.cell hash='index_cache/html/unnamed-chunk-9_fe6505c318b8b8a5e0b355b97990c78b'}\n\n```{.r .cell-code}\n    autoplot(mdeaths) + geom_forecast(h=36)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nAlmost all of this new gglot2 goodness was created by Mitchell O'Hara-Wild, a Monash University student who I employ as a research assistant.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}